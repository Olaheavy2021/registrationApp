{% extends "studentregistration/base.html" %}

{% block content %}
    {% load static %}
    <!-- =======================
    Page intro START -->
    <section class="bg-blue py-7">
        <div class="container">
            <div class="row justify-content-lg-between">
                <div class="col-lg-8">
                    <!-- Title -->
                    <h1 class="text-white">{{ book.volumeInfo.title }}</h1>
                    <!-- Subtitle or Description-->
                    {% if book.volumeInfo.description %}
                        <p class="text-white">{{ book.volumeInfo.description | safe }}</p>
                    {% elif book.volumeInfo.subtitle %}
                        <p class="text-white">{{ book.volumeInfo.subtitle | safe }}</p>
                    {% else %}
                        <p class="text-white">No Description found for this Book</p>
                    {% endif %}
                    <!-- Content -->
                    <ul class="list-inline mb-5">
                        <li class="list-inline-item h6 me-4 mb-1 mb-sm-0 text-white">
            <span class="fw-light">
              <i class="fas fa-book text-purple"></i>
              Code: </span
            >{{ module.code }}
                        </li>
                        <li class="list-inline-item me-4 mb-1 mb-sm-0">
                            <ul class="list-inline mb-0">
                                <li class="list-inline-item ms-2 h6 text-white">
                <span class="fw-light"
                ><i class="fas fa-star text-purple"> </i> Credit: </span
                >{{ module.credit }}
                                </li>
                                <li class="list-inline-item ms-2 h6 text-white">
                <span class="fw-light">
                  <i class="fas fa-graduation-cap text-purple"></i>
                  Category: {{ module.category }}
                </span>
                                </li>
                                <li class="list-inline-item h6 mb-0 text-white">
                                    Availability:
                                    {% if module.available %}
                                        <i class="fas fa-lock-open text-success-emphasis"></i>
                                        Open
                                    {% else %}
                                        <i class="fas fa-lock text-danger"></i>
                                        Closed
                                    {% endif %}
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="col-lg-3">
                    <h6 class="text-white lead fw-light mb-3">
                        <i class="fas fa-user-graduate text-purple me-2"></i>
                        {{ registrations_count }} {% if registrations_count == 1 %} student {% else %}
                        students {% endif %} already enrolled
                    </h6>
                    <!-- Button -->
                    {% if module.available %}

                        {% if user.is_authenticated %}

                            {% if can_register %}

                                {% if has_registration %}
                                    <a href="{% url 'studentregistration:unregister' module.code %}"
                                       class="btn btn-danger mb-3 w-100">
                                        Unregister
                                    </a>
                                {% else %}
                                    <a href="{% url 'studentregistration:register' module.code %}"
                                       class="btn btn-purple mb-3 w-100">Register</a>
                                {% endif %}
                            {% else %}
                                <p>You do not belong to a course offering this module.</p>

                            {% endif %}

                        {% else %}
                            <a href="{% url 'login' %}?next={{ request.get_full_path|urlencode }}"
                               class="btn btn-primary mb-3 w-100">
                                Login to get started
                            </a>
                        {% endif %}
                    {% else %}
                        <p>
                            This module is currently closed to new registrations.
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
    <!-- =======================
        Page intro END -->
{% endblock %}